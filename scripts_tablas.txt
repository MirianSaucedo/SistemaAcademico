
hola probando
para scripts de las tablas


-- Para el ano lectivo 07/03/2017 by CV
create table anho_lectivo
(
  ANHO_LECTIVO VARCHAR2(4) not null,
  FECHA_INICIO  DATE,
  FECHA_FIN     DATE
)
tablespace USERS
  pctfree 10
  initrans 1
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Create/Recreate primary, unique and foreign key constraints 
alter table ANHO_LECTIVO
  add constraint PK_ANHO_LECTIVO primary key (ANHO_LECTIVO)
  using index 
  tablespace USERS
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Grant/Revoke object privileges 
grant select, insert, update, delete, references, alter, index on ANHO_LECTIVO to PUBLIC;

--Agregue la columna observacion en la nota de los trabajos o pruebas de los alumnos

<<<<<<< HEAD
alter table alm_notas_alumnos ADD observacion varchar(300);
alter table mam_escalas ADD cod_usuario varchar(10);
alter table mam_escalas ADD fec_alta    date;
=======
alter table alm_notas_alumnos ADD observacion varchar(300)

-- Para la tabla de materias actualizada, que vendria a ser sub materias by MS
-- Create table
create table MATERIAS
(
  COD_MATERIA         VARCHAR2(5) not null,
  DESCRIPCION         VARCHAR2(100),
  COD_EMPRESA         VARCHAR2(5) not null,
  COD_MATERIA_MAESTRA VARCHAR2(5)
)
tablespace USERS
  pctfree 10
  initrans 1
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Create/Recreate primary, unique and foreign key constraints 
alter table MATERIAS
  add constraint PK_MATERIAS primary key (COD_MATERIA)
  using index 
  tablespace USERS
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Grant/Revoke object privileges 
grant select, insert, update, delete, references, alter, index on MATERIAS to PUBLIC;

--PARA LA TABLA DE MATERIAS MADRE BY MS
-- Create table
create table MATERIA_MAESTRA
(
  COD_EMPRESA         VARCHAR2(5) not null,
  COD_MATERIA_MAESTRA VARCHAR2(5) not null,
  DESCRIPCION         VARCHAR2(100)
)
tablespace USERS
  pctfree 10
  initrans 1
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Create/Recreate primary, unique and foreign key constraints 
alter table MATERIA_MAESTRA
  add constraint PK_SUBMATERIAS primary key (COD_EMPRESA, COD_MATERIA_MAESTRA)
  using index 
  tablespace USERS
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Grant/Revoke object privileges 
grant select, insert, update, delete, references, alter, index on MATERIA_MAESTRA to PUBLIC;
>>>>>>> 37239405bf007d6ef86ce85b8a61fa073f6793a8





--Añadido el 10/03/2017 para poder de una vez definir en el año lectivo las notas min, max, y aprueba
alter table anho_lectivo ADD nota_minima number(2);
alter table anho_lectivo ADD nota_maxima number(3);
alter table anho_lectivo ADD nota_aprueba number(2);
alter table mam_escalas ADD cod_usuario_act varchar(10);
alter table mam_escalas ADD fec_alta_act    date;
--añadido para ver quien insertó en años lectivos

alter table ANHO_LECTIVO ADD cod_usuario_alta varchar(10);
alter table ANHO_LECTIVO ADD fec_alta    date;
alter table alm_notas_cab ADD cod_seccion varchar(2);


--15/03/2017
-- Para el ano lectivo 07/03/2017 by CV
create table CAPACIDADES
(
  COD_CAPACIDAD VARCHAR2(4) not null,
  DESCRIPCION   VARCHAR(50)
 
)
tablespace USERS
  pctfree 10
  initrans 1
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Create/Recreate primary, unique and foreign key constraints 
alter table CAPACIDADES
  add constraint PK_CAPACIDADES primary key (COD_CAPACIDAD)
  using index 
  tablespace USERS
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Grant/Revoke object privileges 
grant select, insert, update, delete, references, alter, index on CAPACIDADES to PUBLIC;




-- RELACION ENTRE ANHO LECTIVO Y CAPACIDADES

create table ANHO_CAPACIDADES
( COD_ANHO_CAP    VARCHAR2(4) not null,
  COD_CAPACIDAD   VARCHAR2(4),
  ANHO_LECTIVO    VARCHAR2(4),
  NIVEL_EXIGENCIA NUMBER(5,1),
  COD_NIVEL       VARCHAR2(4),
  COD_CURSO       VARCHAR2(4),
  COD_MATERIA     VARCHAR2(4)
 
)
tablespace USERS
  pctfree 10
  initrans 1
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Create/Recreate primary, unique and foreign key constraints 
alter table ANHO_CAPACIDADES
  add constraint PK_ANHO_CAPA primary key (COD_ANHO_CAP)
  disable;
-- Grant/Revoke object privileges 
grant select, insert, update, delete, references, alter, index on ANHO_CAPACIDADES to PUBLIC;

--16/03/2017
alter table alm_notas_cab ADD cod_nivel varchar(3);
alter table alm_notas_cab ADD PUNTAJE         NUMBER(4);
alter table alm_notas_cab ADD COD_CAPACIDAD   VARCHAR2(3);
alter table alm_notas_cab ADD FECHA   DATE;

--Relacion entre alumnos y materias
create table ALM_ALUMNOS_MATERIAS
(
  COD_MATRICULA         VARCHAR2(5) not null,
  ANHO_LECTIVO          VARCHAR2(4) not null,
  COD_ALUMNO            VARCHAR2(5) not null,
  COD_MATERIA           VARCHAR2(5) not null
)
tablespace USERS
  pctfree 10
  initrans 1
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Create/Recreate primary, unique and foreign key constraints 
alter table ALM_ALUMNOS_MATERIAS
  add constraint PK_ALM_ALUMNOS_MATERIAS primary key (COD_MATRICULA, ANHO_LECTIVO, COD_ALUMNO, COD_MATERIA)
  using index 
  tablespace USERS
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Grant/Revoke object privileges 
grant select, insert, update, delete, references, alter, index on ALM_ALUMNOS_MATERIAS to PUBLIC;

-- Agregado el 21/03/2017
-- Create table
create table ALM_CALIFICACIONES_CAB
(
  COD_CALIFICACION    VARCHAR(10)not null,
  ANHO_LECTIVO        VARCHAR2(4),
  COD_ETAPA           VARCHAR2(3),
  COD_NIVEL           VARCHAR2(3),
  COD_CURSO           VARCHAR2(3),
  TURNO               VARCHAR2(1),
  SECCION             VARCHAR2(1),
  COD_MATERIA_MAESTRA  VARCHAR2(5),
  COD_MATERIA         VARCHAR2(5),
  COD_USUARIO_ACT     VARCHAR2(15),
  FEC_ACT             DATE,
  COD_USUARIO_ALTA    VARCHAR2(15),
  FEC_ALTA            DATE
)
tablespace USERS
  pctfree 10
  initrans 1
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Create/Recreate primary, unique and foreign key constraints 
alter table ALM_CALIFICACIONES_CAB
  add constraint PK_ALM_CALIFICACIONES_CAB primary key (COD_CALIFICACION)
  using index 
  tablespace USERS
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Grant/Revoke object privileges 
grant select, insert, update, delete, references, alter, index on ALM_CALIFICACIONES_CAB to PUBLIC;



-- Detalle de calificaciones
create table ALM_CALIFICACIONES_DET
(
  COD_CALIFICACION   VARCHAR(10)not null,
  COD_ALUMNO         VARCHAR2(5),
  PUNTAJE_ALCANZADO  NUMBER(4,1),
  CALIFICACION       NUMBER(3)
)
tablespace USERS
  pctfree 10
  initrans 1
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Create/Recreate primary, unique and foreign key constraints 
alter table ALM_CALIFICACIONES_DET
  add constraint PK_ALM_CALIFICACIONES_DET primary key (COD_CALIFICACION, COD_ALUMNO)
  using index 
  tablespace USERS
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Grant/Revoke object privileges 
grant select, insert, update, delete, references, alter, index on ALM_CALIFICACIONES_DET to PUBLIC;





--tABLA DE PROCESOS
-- Create table
create table ALM_PROCESOS_CAB
(
  COD_EMPRESA    VARCHAR2(5) not null,
  COD_PROCESO       VARCHAR2(10) not null,
  COD_MATERIA    VARCHAR2(10) not null,
  COD_DOCENTE    VARCHAR2(10),
  COD_CURSO      VARCHAR2(10),
  COD_ETAPA      VARCHAR2(5),
  TURNO          VARCHAR2(1),
  ANHO_LECTIVO   VARCHAR2(4),
  FEC_ALTA       DATE,
  COD_USUARIO    VARCHAR2(15),
  COD_SECCION    VARCHAR2(2),
  COD_NIVEL      VARCHAR2(3),
  COD_EVALUACION VARCHAR2(3),
  PUNTAJE        NUMBER(4),
  COD_CAPACIDAD  VARCHAR2(3),
  FECHA          DATE
)
tablespace USERS
  pctfree 10
  initrans 1
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Create/Recreate primary, unique and foreign key constraints 
alter table ALM_PROCESOS_CAB
  add constraint PK_ALM_PROCESOS_CAB primary key (COD_EMPRESA, COD_PROCESO)
  using index 
  tablespace USERS
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Grant/Revoke object privileges 
grant select, insert, update, delete, references, alter, index on ALM_PROCESOS_CAB to PUBLIC;





--tABLA DE detalle de procesos
-- Create table
create table ALM_PROCESOS_DET
(
  COD_EMPRESA  VARCHAR2(5) not null,
  COD_PROCESO     VARCHAR2(10) not null,
  COD_ALUMNO   VARCHAR2(10) not null,
  CALIFICACION NUMBER,
  FECHA        DATE,
  OBSERVACION  VARCHAR2(300)
)
tablespace USERS
  pctfree 10
  initrans 1
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Create/Recreate primary, unique and foreign key constraints 
alter table ALM_PROCESOS_DET
  add constraint PK_ALM_PROCESOS_DET primary key (COD_EMPRESA, COD_PROCESO, COD_ALUMNO)
  using index 
  tablespace USERS
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Grant/Revoke object privileges 
grant select, insert, update, delete, references, alter, index on ALM_PROCESOS_DET to PUBLIC;


