
hola probando
para scripts de las tablas


-- Para el ano lectivo 07/03/2017 by CV
create table anho_lectivo
(
  ANHO_LECTIVO VARCHAR2(4) not null,
  FECHA_INICIO  DATE,
  FECHA_FIN     DATE
)
tablespace USERS
  pctfree 10
  initrans 1
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Create/Recreate primary, unique and foreign key constraints 
alter table ANHO_LECTIVO
  add constraint PK_ANHO_LECTIVO primary key (ANHO_LECTIVO)
  using index 
  tablespace USERS
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Grant/Revoke object privileges 
grant select, insert, update, delete, references, alter, index on ANHO_LECTIVO to PUBLIC;

--Agregue la columna observacion en la nota de los trabajos o pruebas de los alumnos

<<<<<<< HEAD
alter table alm_notas_alumnos ADD observacion varchar(300);
alter table mam_escalas ADD cod_usuario varchar(10);
alter table mam_escalas ADD fec_alta    date;
=======
alter table alm_notas_alumnos ADD observacion varchar(300)

-- Para la tabla de materias actualizada, que vendria a ser sub materias by MS
-- Create table
create table MATERIAS
(
  COD_MATERIA         VARCHAR2(5) not null,
  DESCRIPCION         VARCHAR2(100),
  COD_EMPRESA         VARCHAR2(5) not null,
  COD_MATERIA_MAESTRA VARCHAR2(5)
)
tablespace USERS
  pctfree 10
  initrans 1
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Create/Recreate primary, unique and foreign key constraints 
alter table MATERIAS
  add constraint PK_MATERIAS primary key (COD_MATERIA)
  using index 
  tablespace USERS
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Grant/Revoke object privileges 
grant select, insert, update, delete, references, alter, index on MATERIAS to PUBLIC;

--PARA LA TABLA DE MATERIAS MADRE BY MS
-- Create table
create table MATERIA_MAESTRA
(
  COD_EMPRESA         VARCHAR2(5) not null,
  COD_MATERIA_MAESTRA VARCHAR2(5) not null,
  DESCRIPCION         VARCHAR2(100)
)
tablespace USERS
  pctfree 10
  initrans 1
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Create/Recreate primary, unique and foreign key constraints 
alter table MATERIA_MAESTRA
  add constraint PK_SUBMATERIAS primary key (COD_EMPRESA, COD_MATERIA_MAESTRA)
  using index 
  tablespace USERS
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Grant/Revoke object privileges 
grant select, insert, update, delete, references, alter, index on MATERIA_MAESTRA to PUBLIC;
>>>>>>> 37239405bf007d6ef86ce85b8a61fa073f6793a8





--Añadido el 10/03/2017 para poder de una vez definir en el año lectivo las notas min, max, y aprueba
alter table anho_lectivo ADD nota_minima number(2);
alter table anho_lectivo ADD nota_maxima number(3);
alter table anho_lectivo ADD nota_aprueba number(2);
alter table mam_escalas ADD cod_usuario_act varchar(10);
alter table mam_escalas ADD fec_alta_act    date;
--añadido para ver quien insertó en años lectivos

alter table ANHO_LECTIVO ADD cod_usuario_alta varchar(10);
alter table ANHO_LECTIVO ADD fec_alta    date;
alter table alm_notas_cab ADD cod_seccion varchar(2);


--15/03/2017
-- Para el ano lectivo 07/03/2017 by CV
create table CAPACIDADES
(
  COD_CAPACIDAD VARCHAR2(4) not null,
  DESCRIPCION   VARCHAR(50)
 
)
tablespace USERS
  pctfree 10
  initrans 1
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Create/Recreate primary, unique and foreign key constraints 
alter table CAPACIDADES
  add constraint PK_CAPACIDADES primary key (COD_CAPACIDAD)
  using index 
  tablespace USERS
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Grant/Revoke object privileges 
grant select, insert, update, delete, references, alter, index on CAPACIDADES to PUBLIC;




-- RELACION ENTRE ANHO LECTIVO Y CAPACIDADES

create table ANHO_CAPACIDADES
(
  COD_CAPACIDAD   VARCHAR2(4) not null,
  ANHO_LECTIVO    VARCHAR2(4) not null,
  NIVEL_EXIGENCIA NUMBER(5,1)
)
tablespace USERS
  pctfree 10
  initrans 1
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Create/Recreate primary, unique and foreign key constraints 
alter table ANHO_CAPACIDADES
  add constraint PK_ANHO_CAPACIDADES primary key (ANHO_LECTIVO, COD_CAPACIDAD)
  using index 
  tablespace USERS
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Grant/Revoke object privileges 
grant select, insert, update, delete, references, alter, index on ANHO_CAPACIDADES to PUBLIC;
